package partone;

import java.util.Scanner;

/**
 * Main driver class for the Banking Application. Handles initialization and
 * initial I/O as well as connections between Users and Accounts
 * 
 * @author Karan
 *
 */
public class BankingApp {

	/*
	 * UserAuthorizer: responsible for processing registration & login requests
	 * provides User object on successful login.
	 * Houses the User 'database'
	 */
	private static UserAuthorizer userAuth = UserAuthorizer.getUserAuthSingleton();
	
	/*
	 * mainMenu() function handles initial I/O and interaction with above
	 * structures
	 */
	public static void mainMenu() {
		// Input singleton used for Scanner input
		Input in = Input.getInputSingleton();
		
		System.out.println("Welcome to The First Bank of Karan");
		
		// Flag used to determine if user wants to return to this menu and choose another option or quit
		boolean returnToMenu = true;
		
		while(returnToMenu) {
			// Initial options:
			System.out.println("1. Login");
			System.out.println("2. Register");
			System.out.println("3. Quit");
			
			// User choice:
			int choice = in.getInt();
			
			switch (choice) {
			// Login:
			case 1:
				login();
				break;
			// Register:
			case 2:
				register();
				break;
			// Quit:
			case 3:
				System.out.println("Have a great day!");
				returnToMenu = false;
				break;
			default:
				break;
			}
		}
	}
	
	/**
	 * login()
	 * method used to display io, guiding existing users to log in
	 */
	private static void login() {
		Input in = Input.getInputSingleton();
		boolean returnToMenu = true;
		
		while(returnToMenu) {
			System.out.println("Login:");
			System.out.println("Please enter your username");
			String username = in.get();
			if( userAuth.usernameExists(username) ) {
				
			}
			else {
				System.out.println("Username does not exist.");
			}
			System.out.println("1. Login");
			System.out.println("2. Return to main menu");
			int choice = in.getInt();
			switch (choice) {
			case 1:
				break;
			case 2:
				returnToMenu = false;
			default:
				System.out.println("Invalid option, returning to main menu");
				break;
			}
		}
	}
	
	/**
	 * register()
	 * method used to display io, guiding new users to register
	 */
	private static void register() {
		Input in = Input.getInputSingleton();
	}
	
	public static void main(String[] args) {
		// Call the menu method which serves as the I/O handler for the app
		mainMenu();

	}

}
